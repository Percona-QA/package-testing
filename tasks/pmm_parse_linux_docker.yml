# This task contains all supported names of docker containers for package tests then maps selected distribution to the docker container

- name: Select Ubuntu 24.04 Noble Numbat
  set_fact:
    docker_container: "ubuntu:24.04"
  when: linux_distribution == "noble"

- name: Remove old percona server containers
  community.docker.docker_container:
    name: "pmm_package_testing"
    image: "{{ docker_container }}"
    restart_policy: always
    state: absent
  ignore_errors: yes

- name: Start Percona Server containers
  community.docker.docker_container:
    name: "pmm_package_testing"
    image: "{{ docker_container }}"
    restart_policy: always
    state: started
    networks:
      - name: "pmm-qa"
